import re

regex_filter = {
    "categories": {
        "$elemMatch": {
            "$regex": re.escape(detected_category),
            "$options": "i"
        }
    }
}

resp = testing_suggestions.find(regex_filter)


import re

regex_filter = {
    "categories": {
        "$regex": re.escape(detected_category),
        "$options": "i"
    }
}

resp = testing_suggestions.find(regex_filter)


def cursor_to_dicts(cursor):
    result = []
    for doc in cursor:
        if "_id" in doc:
            doc["_id"] = str(doc["_id"])
        result.append(doc)
    return result



ait_int: Optional[int] = (
        int(ait.strip())
        if isinstance(ait, str) and ait.strip().isdigit()
        else None
    )

    ait_name_clean: Optional[str] = ait_name.strip() if isinstance(ait_name, str) else None
    category_clean: Optional[str] = category.strip() if isinstance(category, str) else None

    # -

