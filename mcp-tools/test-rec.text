import re

regex_filter = {
    "categories": {
        "$elemMatch": {
            "$regex": re.escape(detected_category),
            "$options": "i"
        }
    }
}

resp = testing_suggestions.find(regex_filter)


import re

regex_filter = {
    "categories": {
        "$regex": re.escape(detected_category),
        "$options": "i"
    }
}

resp = testing_suggestions.find(regex_filter)


def cursor_to_dicts(cursor):
    result = []
    for doc in cursor:
        if "_id" in doc:
            doc["_id"] = str(doc["_id"])
        result.append(doc)
    return result


